{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lanan\\\\Downloads\\\\NodeSemesteryalyLanaMerna\\\\HealthyLifeStyleByMelana\\\\client\\\\src\\\\pages\\\\Meals.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./Meals.css\";\nimport { mealApi, categoryApi } from \"../services/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useCart } from \"../contexts/CartContext\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport MealCard from \"../components/MealCard\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Meals = () => {\n  _s();\n  const [meals, setMeals] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [cartMessage, setCartMessage] = useState(\"\");\n  const [activeCategory, setActiveCategory] = useState(\"all\");\n  const [showCart, setShowCart] = useState(false);\n  const {\n    user,\n    isAuthenticated,\n    isAdmin,\n    logout\n  } = useAuth();\n  const {\n    cart,\n    addItem,\n    updateQty,\n    removeItem,\n    clearCart,\n    totalItems,\n    totalPrice\n  } = useCart();\n  const navigate = useNavigate();\n\n  // Fetch meals and categories from the backend\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch meals from the backend\n        const mealsData = await mealApi.getAllMeals();\n        setMeals(Array.isArray(mealsData) ? mealsData : []);\n\n        // Fetch categories from the backend\n        const categoriesData = await categoryApi.getAllCategories();\n        setCategories(Array.isArray(categoriesData) ? categoriesData : []);\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching data:\", err);\n        setError(\"◊©◊í◊ô◊ê◊î ◊ë◊ò◊¢◊ô◊†◊™ ◊î◊†◊™◊ï◊†◊ô◊ù. ◊ê◊†◊ê ◊†◊°◊î ◊©◊ï◊ë ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊®.\");\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // We don't need to load or save cart here anymore as CartContext handles that\n\n  // Function to handle adding items to cart using CartContext\n  const addToCart = meal => {\n    // Check if user is authenticated\n    if (!isAuthenticated()) {\n      navigate(\"/login\", {\n        state: {\n          from: \"/meals\"\n        }\n      });\n      return;\n    }\n\n    // Create a cart item from the meal\n    const cartItem = {\n      id: meal.meal_id,\n      name: meal.meal_name,\n      price: Number(meal.price),\n      // Ensure price is a number\n      imgUrl: meal.image_url,\n      description: meal.description,\n      calories: meal.calories\n    };\n\n    // Add to cart using CartContext\n    addItem(cartItem, 1);\n\n    // Show success message\n    setCartMessage(`${meal.meal_name} ◊†◊ï◊°◊£ ◊ú◊°◊ú ◊î◊ß◊†◊ô◊ï◊™`);\n    setTimeout(() => {\n      setCartMessage(\"\");\n    }, 3000);\n  };\n  const removeFromCart = mealId => {\n    removeItem(mealId);\n  };\n  const updateQuantity = (mealId, newQuantity) => {\n    if (newQuantity < 1) {\n      removeItem(mealId);\n      return;\n    }\n    updateQty(mealId, newQuantity);\n  };\n  const getTotalPrice = () => {\n    return totalPrice;\n  };\n  const checkout = async () => {\n    if (cart.length === 0) return;\n    try {\n      // Create orders for each item in cart\n      for (const item of cart) {\n        await mealApi.createOrder({\n          meal_id: item.id,\n          // Using correct property name\n          quantity: item.qty,\n          // Using correct property name\n          status: \"pending\"\n        });\n      }\n\n      // Clear cart and show success message\n      clearCart(); // Using the clearCart function from CartContext\n      setCartMessage(\"◊î◊î◊ñ◊û◊†◊î ◊ë◊ï◊¶◊¢◊î ◊ë◊î◊¶◊ú◊ó◊î!\");\n      setTimeout(() => {\n        setCartMessage(\"\");\n      }, 3000);\n    } catch (error) {\n      setError(\"◊©◊í◊ô◊ê◊î ◊ë◊ë◊ô◊¶◊ï◊¢ ◊î◊î◊ñ◊û◊†◊î. ◊ê◊†◊ê ◊†◊°◊î ◊©◊ï◊ë.\");\n      console.error(\"Checkout error:\", error);\n    }\n  };\n\n  // Filter meals by active category\n  const filteredMeals = activeCategory === \"all\" ? Array.isArray(meals) ? meals : [] : Array.isArray(meals) ? meals.filter(meal => meal.category_id === parseInt(activeCategory)) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"meals-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDF74 \\u05D4\\u05D6\\u05DE\\u05E0\\u05EA \\u05DE\\u05E0\\u05D5\\u05EA \\u05D1\\u05E8\\u05D9\\u05D0\\u05D5\\u05EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"\\u05D3\\u05E3 \\u05D4\\u05D1\\u05D9\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/meals\",\n          children: \"\\u05EA\\u05E4\\u05E8\\u05D9\\u05D8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/cart\",\n          children: \"\\u05E1\\u05DC \\u05E7\\u05E0\\u05D9\\u05D5\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/contact\",\n          children: \"\\u05E6\\u05D5\\u05E8 \\u05E7\\u05E9\\u05E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), isAdmin() && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin\",\n          className: \"admin-link\",\n          children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), !isAuthenticated() && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            children: \"\\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), isAuthenticated() && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"#\",\n          onClick: () => {\n            logout();\n            navigate(\"/\");\n          },\n          className: \"logout-link\",\n          children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), cartMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-message\",\n      children: cartMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cart-button\",\n        onClick: () => setShowCart(!showCart),\n        children: [\"\\uD83D\\uDED2 \\u05E1\\u05DC \\u05E7\\u05E0\\u05D9\\u05D5\\u05EA (\", cart.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), showCart && cart.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u05E1\\u05DC \\u05D4\\u05E7\\u05E0\\u05D9\\u05D5\\u05EA \\u05E9\\u05DC\\u05DA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => updateQuantity(item.id, item.qty - 1),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.qty\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => updateQuantity(item.id, item.qty + 1),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u20AA\", item.price * item.qty]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeFromCart(item.id),\n            children: \"\\u274C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-total\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u05E1\\u05D4\\\"\\u05DB:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u20AA\", getTotalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"checkout-button\",\n        onClick: checkout,\n        children: \"\\u05DC\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-cart\",\n        onClick: () => setShowCart(false),\n        children: \"\\u05E1\\u05D2\\u05D5\\u05E8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cart-button\",\n        onClick: () => setShowCart(!showCart),\n        children: [\"\\uD83D\\uDED2 \\u05E1\\u05DC \\u05E7\\u05E0\\u05D9\\u05D5\\u05EA (\", cart.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), showCart && cart.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u05E1\\u05DC \\u05D4\\u05E7\\u05E0\\u05D9\\u05D5\\u05EA \\u05E9\\u05DC\\u05DA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => updateQuantity(item.id, item.qty - 1),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.qty\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => updateQuantity(item.id, item.qty + 1),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u20AA\", item.price * item.qty]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeFromCart(item.id),\n            children: \"\\u274C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-total\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u05E1\\u05D4\\\"\\u05DB:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u20AA\", getTotalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"checkout-button\",\n        onClick: checkout,\n        children: \"\\u05DC\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-cart\",\n        onClick: () => setShowCart(false),\n        children: \"\\u05E1\\u05D2\\u05D5\\u05E8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u05D8\\u05D5\\u05E2\\u05DF \\u05DE\\u05E0\\u05D5\\u05EA...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"meals-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-filter\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeCategory === \"all\" ? \"active\" : \"\",\n          onClick: () => setActiveCategory(\"all\"),\n          children: \"\\u05D4\\u05DB\\u05DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this), Array.isArray(categories) && categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeCategory === category.category_id.toString() ? \"active\" : \"\",\n          onClick: () => setActiveCategory(category.category_id.toString()),\n          children: category.category_name\n        }, category.category_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"meals-grid\",\n        children: filteredMeals.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-meals\",\n          children: \"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05E0\\u05D5\\u05EA \\u05D1\\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D6\\u05D5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-grid\",\n          children: filteredMeals.map(meal => /*#__PURE__*/_jsxDEV(MealCard, {\n            meal: meal,\n            onAddToCart: addToCart\n          }, meal.meal_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n_s(Meals, \"Ixwu6I+l7aSx2Z2rtWHcBqzHKxI=\", false, function () {\n  return [useAuth, useCart, useNavigate];\n});\n_c = Meals;\nexport default Meals;\nvar _c;\n$RefreshReg$(_c, \"Meals\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","mealApi","categoryApi","useAuth","useCart","LoadingSpinner","MealCard","jsxDEV","_jsxDEV","Fragment","_Fragment","Meals","_s","meals","setMeals","categories","setCategories","loading","setLoading","error","setError","cartMessage","setCartMessage","activeCategory","setActiveCategory","showCart","setShowCart","user","isAuthenticated","isAdmin","logout","cart","addItem","updateQty","removeItem","clearCart","totalItems","totalPrice","navigate","fetchData","mealsData","getAllMeals","Array","isArray","categoriesData","getAllCategories","err","console","addToCart","meal","state","from","cartItem","id","meal_id","name","meal_name","price","Number","imgUrl","image_url","description","calories","setTimeout","removeFromCart","mealId","updateQuantity","newQuantity","getTotalPrice","checkout","length","item","createOrder","quantity","qty","status","filteredMeals","filter","category_id","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","map","category","toString","category_name","onAddToCart","_c","$RefreshReg$"],"sources":["C:/Users/lanan/Downloads/NodeSemesteryalyLanaMerna/HealthyLifeStyleByMelana/client/src/pages/Meals.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./Meals.css\";\nimport { mealApi, categoryApi } from \"../services/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useCart } from \"../contexts/CartContext\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport MealCard from \"../components/MealCard\";\n\nconst Meals = () => {\n  const [meals, setMeals] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [cartMessage, setCartMessage] = useState(\"\");\n  const [activeCategory, setActiveCategory] = useState(\"all\");\n  const [showCart, setShowCart] = useState(false);\n\n  const { user, isAuthenticated, isAdmin, logout } = useAuth();\n  const {\n    cart,\n    addItem,\n    updateQty,\n    removeItem,\n    clearCart,\n    totalItems,\n    totalPrice,\n  } = useCart();\n  const navigate = useNavigate();\n\n  // Fetch meals and categories from the backend\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch meals from the backend\n        const mealsData = await mealApi.getAllMeals();\n        setMeals(Array.isArray(mealsData) ? mealsData : []);\n\n        // Fetch categories from the backend\n        const categoriesData = await categoryApi.getAllCategories();\n        setCategories(Array.isArray(categoriesData) ? categoriesData : []);\n\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching data:\", err);\n        setError(\"◊©◊í◊ô◊ê◊î ◊ë◊ò◊¢◊ô◊†◊™ ◊î◊†◊™◊ï◊†◊ô◊ù. ◊ê◊†◊ê ◊†◊°◊î ◊©◊ï◊ë ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊®.\");\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  // We don't need to load or save cart here anymore as CartContext handles that\n\n  // Function to handle adding items to cart using CartContext\n  const addToCart = (meal) => {\n    // Check if user is authenticated\n    if (!isAuthenticated()) {\n      navigate(\"/login\", { state: { from: \"/meals\" } });\n      return;\n    }\n\n    // Create a cart item from the meal\n    const cartItem = {\n      id: meal.meal_id,\n      name: meal.meal_name,\n      price: Number(meal.price), // Ensure price is a number\n      imgUrl: meal.image_url,\n      description: meal.description,\n      calories: meal.calories,\n    };\n\n    // Add to cart using CartContext\n    addItem(cartItem, 1);\n\n    // Show success message\n    setCartMessage(`${meal.meal_name} ◊†◊ï◊°◊£ ◊ú◊°◊ú ◊î◊ß◊†◊ô◊ï◊™`);\n    setTimeout(() => {\n      setCartMessage(\"\");\n    }, 3000);\n  };\n\n  const removeFromCart = (mealId) => {\n    removeItem(mealId);\n  };\n\n  const updateQuantity = (mealId, newQuantity) => {\n    if (newQuantity < 1) {\n      removeItem(mealId);\n      return;\n    }\n\n    updateQty(mealId, newQuantity);\n  };\n\n  const getTotalPrice = () => {\n    return totalPrice;\n  };\n\n  const checkout = async () => {\n    if (cart.length === 0) return;\n\n    try {\n      // Create orders for each item in cart\n      for (const item of cart) {\n        await mealApi.createOrder({\n          meal_id: item.id, // Using correct property name\n          quantity: item.qty, // Using correct property name\n          status: \"pending\",\n        });\n      }\n\n      // Clear cart and show success message\n      clearCart(); // Using the clearCart function from CartContext\n      setCartMessage(\"◊î◊î◊ñ◊û◊†◊î ◊ë◊ï◊¶◊¢◊î ◊ë◊î◊¶◊ú◊ó◊î!\");\n      setTimeout(() => {\n        setCartMessage(\"\");\n      }, 3000);\n    } catch (error) {\n      setError(\"◊©◊í◊ô◊ê◊î ◊ë◊ë◊ô◊¶◊ï◊¢ ◊î◊î◊ñ◊û◊†◊î. ◊ê◊†◊ê ◊†◊°◊î ◊©◊ï◊ë.\");\n      console.error(\"Checkout error:\", error);\n    }\n  };\n\n  // Filter meals by active category\n  const filteredMeals =\n    activeCategory === \"all\"\n      ? Array.isArray(meals)\n        ? meals\n        : []\n      : Array.isArray(meals)\n      ? meals.filter((meal) => meal.category_id === parseInt(activeCategory))\n      : [];\n\n  return (\n    <div className=\"meals-page\">\n      <header>\n        <h1>üç¥ ◊î◊ñ◊û◊†◊™ ◊û◊†◊ï◊™ ◊ë◊®◊ô◊ê◊ï◊™</h1>\n        <nav>\n          <Link to=\"/\">◊ì◊£ ◊î◊ë◊ô◊™</Link>\n          <Link to=\"/meals\">◊™◊§◊®◊ô◊ò</Link>\n          <Link to=\"/cart\">◊°◊ú ◊ß◊†◊ô◊ï◊™</Link>\n          <Link to=\"/contact\">◊¶◊ï◊® ◊ß◊©◊®</Link>\n          {isAdmin() && (\n            <Link to=\"/admin\" className=\"admin-link\">\n              ◊†◊ô◊î◊ï◊ú\n            </Link>\n          )}\n          {!isAuthenticated() && (\n            <>\n              <Link to=\"/login\">◊î◊™◊ó◊ë◊®◊ï◊™</Link>\n              <Link to=\"/signup\">◊î◊®◊©◊û◊î</Link>\n            </>\n          )}\n          {isAuthenticated() && (\n            <Link\n              to=\"#\"\n              onClick={() => {\n                logout();\n                navigate(\"/\");\n              }}\n              className=\"logout-link\"\n            >\n              ◊î◊™◊†◊™◊ß\n            </Link>\n          )}\n        </nav>\n      </header>\n\n      {cartMessage && <div className=\"cart-message\">{cartMessage}</div>}\n\n      {/* Cart button */}\n      <div className=\"cart-button-container\">\n        <button className=\"cart-button\" onClick={() => setShowCart(!showCart)}>\n          üõí ◊°◊ú ◊ß◊†◊ô◊ï◊™ ({cart.length})\n        </button>\n      </div>\n\n      {/* Cart popup */}\n      {showCart && cart.length > 0 && (\n        <div className=\"cart-popup\">\n          <h3>◊°◊ú ◊î◊ß◊†◊ô◊ï◊™ ◊©◊ú◊ö</h3>\n          <ul>\n            {cart.map((item) => (\n              <li key={item.id}>\n                <span>{item.name}</span>\n                <div className=\"quantity-controls\">\n                  <button onClick={() => updateQuantity(item.id, item.qty - 1)}>\n                    -\n                  </button>\n                  <span>{item.qty}</span>\n                  <button onClick={() => updateQuantity(item.id, item.qty + 1)}>\n                    +\n                  </button>\n                </div>\n                <span>‚Ç™{item.price * item.qty}</span>\n                <button onClick={() => removeFromCart(item.id)}>‚ùå</button>\n              </li>\n            ))}\n          </ul>\n          <div className=\"cart-total\">\n            <span>◊°◊î\"◊õ:</span>\n            <span>‚Ç™{getTotalPrice()}</span>\n          </div>\n          <button className=\"checkout-button\" onClick={checkout}>\n            ◊ú◊™◊©◊ú◊ï◊ù\n          </button>\n          <button className=\"close-cart\" onClick={() => setShowCart(false)}>\n            ◊°◊í◊ï◊®\n          </button>\n        </div>\n      )}\n\n      {/* Cart button */}\n      <div className=\"cart-button-container\">\n        <button className=\"cart-button\" onClick={() => setShowCart(!showCart)}>\n          üõí ◊°◊ú ◊ß◊†◊ô◊ï◊™ ({cart.length})\n        </button>\n      </div>\n\n      {/* Cart popup */}\n      {showCart && cart.length > 0 && (\n        <div className=\"cart-popup\">\n          <h3>◊°◊ú ◊î◊ß◊†◊ô◊ï◊™ ◊©◊ú◊ö</h3>\n          <ul>\n            {cart.map((item) => (\n              <li key={item.id}>\n                <span>{item.name}</span>\n                <div className=\"quantity-controls\">\n                  <button onClick={() => updateQuantity(item.id, item.qty - 1)}>\n                    -\n                  </button>\n                  <span>{item.qty}</span>\n                  <button onClick={() => updateQuantity(item.id, item.qty + 1)}>\n                    +\n                  </button>\n                </div>\n                <span>‚Ç™{item.price * item.qty}</span>\n                <button onClick={() => removeFromCart(item.id)}>‚ùå</button>\n              </li>\n            ))}\n          </ul>\n          <div className=\"cart-total\">\n            <span>◊°◊î\"◊õ:</span>\n            <span>‚Ç™{getTotalPrice()}</span>\n          </div>\n          <button className=\"checkout-button\" onClick={checkout}>\n            ◊ú◊™◊©◊ú◊ï◊ù\n          </button>\n          <button className=\"close-cart\" onClick={() => setShowCart(false)}>\n            ◊°◊í◊ï◊®\n          </button>\n        </div>\n      )}\n\n      {loading ? (\n        <div className=\"loading-container\">\n          <LoadingSpinner />\n          <p>◊ò◊ï◊¢◊ü ◊û◊†◊ï◊™...</p>\n        </div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : (\n        <main className=\"meals-container\">\n          {/* Category filter */}\n          <div className=\"category-filter\">\n            <button\n              className={activeCategory === \"all\" ? \"active\" : \"\"}\n              onClick={() => setActiveCategory(\"all\")}\n            >\n              ◊î◊õ◊ú\n            </button>\n            {Array.isArray(categories) &&\n              categories.map((category) => (\n                <button\n                  key={category.category_id}\n                  className={\n                    activeCategory === category.category_id.toString()\n                      ? \"active\"\n                      : \"\"\n                  }\n                  onClick={() =>\n                    setActiveCategory(category.category_id.toString())\n                  }\n                >\n                  {category.category_name}\n                </button>\n              ))}\n          </div>\n\n          {/* Display meals using MealCard component */}\n          <section className=\"meals-grid\">\n            {filteredMeals.length === 0 ? (\n              <p className=\"no-meals\">◊ú◊ê ◊†◊û◊¶◊ê◊ï ◊û◊†◊ï◊™ ◊ë◊ß◊ò◊í◊ï◊®◊ô◊î ◊ñ◊ï</p>\n            ) : (\n              <div className=\"card-grid\">\n                {filteredMeals.map((meal) => (\n                  <MealCard\n                    key={meal.meal_id}\n                    meal={meal}\n                    onAddToCart={addToCart}\n                  />\n                ))}\n              </div>\n            )}\n          </section>\n        </main>\n      )}\n    </div>\n  );\n};\n\nexport default Meals;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}