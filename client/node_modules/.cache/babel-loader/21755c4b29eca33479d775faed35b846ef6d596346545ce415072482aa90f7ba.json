{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lanan\\\\Downloads\\\\NodeSemesteryalyLanaMerna\\\\HealthyLifeStyleByMelana\\\\client\\\\src\\\\contexts\\\\CartContext.jsx\",\n  _JSON$parse,\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useReducer, useContext, useEffect } from \"react\";\n\n// --------- trạng thái ראשוני -----------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = (_JSON$parse = JSON.parse(localStorage.getItem(\"cart\"))) !== null && _JSON$parse !== void 0 ? _JSON$parse : [];\n\n/* cart item = { id, name, price, imgUrl, qty } */\nfunction cartReducer(state, action) {\n  switch (action.type) {\n    case \"ADD\":\n      const existing = state.find(i => i.id === action.item.id);\n      if (existing) {\n        return state.map(i => i.id === existing.id ? {\n          ...i,\n          qty: i.qty + action.item.qty\n        } : i);\n      }\n      return [...state, action.item];\n    case \"UPDATE_QTY\":\n      return state.map(i => i.id === action.id ? {\n        ...i,\n        qty: action.qty\n      } : i);\n    case \"REMOVE\":\n      return state.filter(i => i.id !== action.id);\n    case \"CLEAR\":\n      return [];\n    default:\n      return state;\n  }\n}\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function CartProvider({\n  children\n}) {\n  _s2();\n  const [cart, dispatch] = useReducer(cartReducer, initialState);\n\n  // שכיבה / התעוררות מה-localStorage\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }, [cart]);\n\n  // פעולות נוחות\n  const addItem = (item, qty = 1) => dispatch({\n    type: \"ADD\",\n    item: {\n      ...item,\n      qty\n    }\n  });\n  const updateQty = (id, qty) => dispatch({\n    type: \"UPDATE_QTY\",\n    id,\n    qty\n  });\n  const removeItem = id => dispatch({\n    type: \"REMOVE\",\n    id\n  });\n  const clearCart = () => dispatch({\n    type: \"CLEAR\"\n  });\n  const totalItems = cart.reduce((s, i) => s + i.qty, 0);\n  const totalPrice = cart.reduce((s, i) => s + i.qty * i.price, 0);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addItem,\n      updateQty,\n      removeItem,\n      clearCart,\n      totalItems,\n      totalPrice\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s2(CartProvider, \"AybYfaEv3u48un10whgik6AoBGQ=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useReducer","useContext","useEffect","jsxDEV","_jsxDEV","initialState","_JSON$parse","JSON","parse","localStorage","getItem","cartReducer","state","action","type","existing","find","i","id","item","map","qty","filter","CartContext","useCart","_s","CartProvider","children","_s2","cart","dispatch","setItem","stringify","addItem","updateQty","removeItem","clearCart","totalItems","reduce","s","totalPrice","price","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/lanan/Downloads/NodeSemesteryalyLanaMerna/HealthyLifeStyleByMelana/client/src/contexts/CartContext.jsx"],"sourcesContent":["import { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\n// --------- trạng thái ראשוני -----------\r\nconst initialState = JSON.parse(localStorage.getItem(\"cart\")) ?? [];\r\n\r\n/* cart item = { id, name, price, imgUrl, qty } */\r\nfunction cartReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"ADD\":\r\n      const existing = state.find(i => i.id === action.item.id);\r\n      if (existing) {\r\n        return state.map(i =>\r\n          i.id === existing.id ? { ...i, qty: i.qty + action.item.qty } : i\r\n        );\r\n      }\r\n      return [...state, action.item];\r\n\r\n    case \"UPDATE_QTY\":\r\n      return state.map(i =>\r\n        i.id === action.id ? { ...i, qty: action.qty } : i\r\n      );\r\n\r\n    case \"REMOVE\":\r\n      return state.filter(i => i.id !== action.id);\r\n\r\n    case \"CLEAR\":\r\n      return [];\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst CartContext = createContext();\r\nexport const useCart = () => useContext(CartContext);\r\n\r\nexport function CartProvider({ children }) {\r\n  const [cart, dispatch] = useReducer(cartReducer, initialState);\r\n\r\n  // שכיבה / התעוררות מה-localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  // פעולות נוחות\r\n  const addItem = (item, qty = 1) =>\r\n    dispatch({ type: \"ADD\", item: { ...item, qty } });\r\n  const updateQty = (id, qty) => dispatch({ type: \"UPDATE_QTY\", id, qty });\r\n  const removeItem = id => dispatch({ type: \"REMOVE\", id });\r\n  const clearCart = () => dispatch({ type: \"CLEAR\" });\r\n\r\n  const totalItems = cart.reduce((s, i) => s + i.qty, 0);\r\n  const totalPrice = cart.reduce((s, i) => s + i.qty * i.price, 0);\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{ cart, addItem, updateQty, removeItem, clearCart, totalItems, totalPrice }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}